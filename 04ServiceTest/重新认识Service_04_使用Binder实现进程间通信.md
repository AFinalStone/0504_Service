## 前言

> 上一篇我们讲述了AIDL的使用以及具体的实现细节，本篇我们将不再使用AIDL语言，而是直接使用Binder来实现进程间的通信。

## 一、进程间通信和Binder技术

### 1.1 进程间通信的方式

> 广义的讲，进程间通信（Inter-process communication,简称IPC）是指运行在不同进程中的若干线程间的数据交换。

在操作系统中，每个进程都有一块独立的内存空间。为了保证程序的的安全性，操作系统都会有一套严格的安全机制来禁止进程间的非法访问。
毕竟，如果你的APP能访问到别的APP的运行空间，或者别的APP可以轻而易举的访问到你APP的运行空间，想象一下你是不是崩溃的心都有了。
所以，操作系统层面会对应用进程进行内存隔离，以保证APP的运行安全。 但是很多情况下进程间也是需要相互通信的，例如剪贴板的功能，  
可以从一个程序中复制信息到另一个程序。这就是进程间通信诞生的背景。

操作系统中常见的进程间通信方式有共享内存、管道、UDS以及Binder等。关于这些进程间的通信方式本篇文章我们不做深究，了解即可。

- 共享内存（Shared Memory)
  共享内存方式实现进程间通信依靠的是申请一块内存区域，让后将这块内存映射到进程空间中，这样两个进程都可以直接访问这块内存。在进行进程间通信时，两个进程可以利用这块内存空间进行数据交换。通过这样的方式，减少了数据的赋值操作，因此共享内存实现进程间通信在速度上有明显优势。
- 管道（Pipe） 管道也是操作系统中常见的一种进程间通信方式，Windows系统进程间的通信依赖于此中方式实现。在进行进程间通信时，会在两个进程间建立一根拥有读（read）写(write)
  功能的管道,一个进程写数据，另一个进程可以读取数据，从而实现进程间通信问题。
- UDS（UNIX Domain Socket） UDS也被称为IPC Socket，但它有别于network
  的Socket。UDS的内部实现不依赖于TCP/IP协议，而是基于本机的“安全可靠操作”实现。UDS这种进程间通信方式在Android中用到的也是比较多的。
- Binder Binder是Android中独有的一种进程间通信方式。它底层依靠mmap,只需要一次数据拷贝，把一块物理内存同时映射到内核和目标进程的用户空间。

本篇文章，我们重点就是了解如何使用Binder实现进程间通信。Binder仅仅从名字来看就给人一种很神秘的感觉，就因为这个名字可能就会吓走不少初学者。
但其实Binder本身并没有很神秘，它仅仅是Android系统提供给开发者的一种进程间通信方式。而作为一个Android开发者，Binder是我们必须掌握的知识。
因为它是构架整个Android大厦的钢筋和混凝土，连接了Android各个系统服务和上层应用。 只有了解了Binder机制才能更加深入的理解Android开发和Android Framework。

## 二、使用Binder实现进程间通信

无论是哪种进程间通信，都是需要一个进程提供数据，一个进程获取数据。因此，我们可以把提供数据的一端称为服务端，把获取数据的一端称为客户端。  
从这个角度来看Binder是不是就有点类似于HTTP协议了？所以，你完全可以把Binder当成是一种HTTP协议，客户端通过Binder来获取服务端的数据。  
认识到这一点，再看Binder的使用就会简单很多。   
这里我们继续使用前面几篇文章中出现的例子，服务端提供把字符串转化成大写的接口，客户端连接服务端来实现字符串小写转大写的功能，而客户端与服务端的媒介就是Binder。

### 2.1 服务端的实现

```java

```










